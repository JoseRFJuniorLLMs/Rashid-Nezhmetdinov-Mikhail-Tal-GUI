<!DOCTYPE html>
<html lang="pt" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="description" content="Treine xadrez e navegue por partidas PGN">
    <meta name="keywords" content="chess, chessboard, pgn, notation">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Notation Training</title>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;400;500;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <h4 id="opening-name"
        style="color: #F0D9B5; margin: 5px 0 10px; min-height: 1.2em; font-style: italic; font-weight: 500;">
    </h4>
    <div id="opening-history-box"
        style="display: none; margin-top: 15px; padding: 12px; background-color: #2a2926; border: 1px solid #B58863; border-radius: 5px; text-align: left; font-style: normal; font-size: 0.9em;">
        <h5>Sobre a Abertura</h5>
        <p id="opening-history-text"></p>
    </div>


    <div class="sidebar-game">
        <div id="square-random"></div>
        <div id="square-clicked"></div>
        <div id="square-score"></div>
    </div>

    <!-- Todos os botões fixos/suspensos -->
    <button id="toggle-left" class="toggle-sidebar-btn toggle-left-btn" title="Mostrar/Ocultar Painel Esquerdo">
        ◀
    </button>
    <button id="toggle-right" class="toggle-sidebar-btn toggle-right-btn" title="Mostrar/Ocultar Painel Direito">
        ▶
    </button>

    <!-- Botões de navegação PGN - FIXOS À DIREITA -->
    <div class="pgn-nav-left">
        <button class="pgn-nav-side-btn" id="btn-pgn-start" title="Início">⮜</button>
        <button class="pgn-nav-side-btn" id="btn-pgn-prev" title="Anterior">◀</button>
    </div>

    <div class="pgn-nav-right">
        <button class="pgn-nav-side-btn" id="btn-pgn-next" title="Próximo">▶</button>
        <button class="pgn-nav-side-btn" id="btn-pgn-end" title="Fim">⭲</button>
    </div>

    <!-- Botão de inverter tabuleiro - FIXO À DIREITA EMBAIXO -->
    <button id="btn-reverse" class="myButton config-btn" title="Inverter orientação do tabuleiro">
        🔄
    </button>

    <!-- Grid principal -->
    <div class="main">
        <div class="sidebar-left">
            <div class="pgn-loader-section">
                <div id="pgn-input-area">
                    <div style="margin-bottom:15px;">
                        <a href="#" class="myButton" id="btn-paste-pgn">📋 Colar PGN</a>
                    </div>

                    <textarea id="pgn-input" style="display:none;"></textarea>
                    <a href="#" id="btn-load-pgn" style="display:none;">Carregar PGN</a>
                </div>

                <p id="pgn-status">Nenhum PGN carregado.</p>

                <div class="pgn-navigation">
                    <p id="current-move">Folha de PGN</p>
                </div>

                <div id="pgn-score-sheet" class="score-sheet" style="display:none; margin:15px 0;">
                    <div
                        style="padding:8px; background:#eee; border-bottom:1px solid #ccc; font-weight:bold; color:#333; display:flex;">
                        <span style="flex:1; text-align:left; padding-left: 30px;">Brancas</span>
                        <span style="flex:1; text-align:left;">Pretas</span>
                    </div>
                    <div id="pgn-move-list"></div>
                </div>
            </div>
        </div>

        <div class="chess-board">
            <div id="player-black-name" class="player-name-display"></div>

            <svg id="move-arrow-layer" xmlns="http://www.w3.org/2000/svg"></svg>
            <svg id="analysis-tree-layer" xmlns="http://www.w3.org/2000/svg"></svg>

            <div class="chess-row" id="r8">
                <div class="chess-square light" id="a8"><span class="notation">a8</span></div>
                <div class="chess-square dark" id="b8"><span class="notation">b8</span></div>
                <div class="chess-square light" id="c8"><span class="notation">c8</span></div>
                <div class="chess-square dark" id="d8"><span class="notation">d8</span></div>
                <div class="chess-square light" id="e8"><span class="notation">e8</span></div>
                <div class="chess-square dark" id="f8"><span class="notation">f8</span></div>
                <div class="chess-square light" id="g8"><span class="notation">g8</span></div>
                <div class="chess-square dark" id="h8"><span class="notation">h8</span></div>
            </div>
            <div class="chess-row" id="r7">
                <div class="chess-square dark" id="a7"><span class="notation">a7</span></div>
                <div class="chess-square light" id="b7"><span class="notation">b7</span></div>
                <div class="chess-square dark" id="c7"><span class="notation">c7</span></div>
                <div class="chess-square light" id="d7"><span class="notation">d7</span></div>
                <div class="chess-square dark" id="e7"><span class="notation">e7</span></div>
                <div class="chess-square light" id="f7"><span class="notation">f7</span></div>
                <div class="chess-square dark" id="g7"><span class="notation">g7</span></div>
                <div class="chess-square light" id="h7"><span class="notation">h7</span></div>
            </div>
            <div class="chess-row" id="r6">
                <div class="chess-square light" id="a6"><span class="notation">a6</span></div>
                <div class="chess-square dark" id="b6"><span class="notation">b6</span></div>
                <div class="chess-square light" id="c6"><span class="notation">c6</span></div>
                <div class="chess-square dark" id="d6"><span class="notation">d6</span></div>
                <div class="chess-square light" id="e6"><span class="notation">e6</span></div>
                <div class="chess-square dark" id="f6"><span class="notation">f6</span></div>
                <div class="chess-square light" id="g6"><span class="notation">g6</span></div>
                <div class="chess-square dark" id="h6"><span class="notation">h6</span></div>
            </div>
            <div class="chess-row" id="r5">
                <div class="chess-square dark" id="a5"><span class="notation">a5</span></div>
                <div class="chess-square light" id="b5"><span class="notation">b5</span></div>
                <div class="chess-square dark" id="c5"><span class="notation">c5</span></div>
                <div class="chess-square light" id="d5"><span class="notation">d5</span></div>
                <div class="chess-square dark" id="e5"><span class="notation">e5</span></div>
                <div class="chess-square light" id="f5"><span class="notation">f5</span></div>
                <div class="chess-square dark" id="g5"><span class="notation">g5</span></div>
                <div class="chess-square light" id="h5"><span class="notation">h5</span></div>
            </div>
            <div class="chess-row" id="r4">
                <div class="chess-square light" id="a4"><span class="notation">a4</span></div>
                <div class="chess-square dark" id="b4"><span class="notation">b4</span></div>
                <div class="chess-square light" id="c4"><span class="notation">c4</span></div>
                <div class="chess-square dark" id="d4"><span class="notation">d4</span></div>
                <div class="chess-square light" id="e4"><span class="notation">e4</span></div>
                <div class="chess-square dark" id="f4"><span class="notation">f4</span></div>
                <div class="chess-square light" id="g4"><span class="notation">g4</span></div>
                <div class="chess-square dark" id="h4"><span class="notation">h4</span></div>
            </div>
            <div class="chess-row" id="r3">
                <div class="chess-square dark" id="a3"><span class="notation">a3</span></div>
                <div class="chess-square light" id="b3"><span class="notation">b3</span></div>
                <div class="chess-square dark" id="c3"><span class="notation">c3</span></div>
                <div class="chess-square light" id="d3"><span class="notation">d3</span></div>
                <div class="chess-square dark" id="e3"><span class="notation">e3</span></div>
                <div class="chess-square light" id="f3"><span class="notation">f3</span></div>
                <div class="chess-square dark" id="g3"><span class="notation">g3</span></div>
                <div class="chess-square light" id="h3"><span class="notation">h3</span></div>
            </div>
            <div class="chess-row" id="r2">
                <div class="chess-square light" id="a2"><span class="notation">a2</span></div>
                <div class="chess-square dark" id="b2"><span class="notation">b2</span></div>
                <div class="chess-square light" id="c2"><span class="notation">c2</span></div>
                <div class="chess-square dark" id="d2"><span class="notation">d2</span></div>
                <div class="chess-square light" id="e2"><span class="notation">e2</span></div>
                <div class="chess-square dark" id="f2"><span class="notation">f2</span></div>
                <div class="chess-square light" id="g2"><span class="notation">g2</span></div>
                <div class="chess-square dark" id="h2"><span class="notation">h2</span></div>
            </div>
            <div class="chess-row" id="r1">
                <div class="chess-square dark" id="a1"><span class="notation">a1</span></div>
                <div class="chess-square light" id="b1"><span class="notation">b1</span></div>
                <div class="chess-square dark" id="c1"><span class="notation">c1</span></div>
                <div class="chess-square light" id="d1"><span class="notation">d1</span></div>
                <div class="chess-square dark" id="e1"><span class="notation">e1</span></div>
                <div class="chess-square light" id="f1"><span class="notation">f1</span></div>
                <div class="chess-square dark" id="g1"><span class="notation">g1</span></div>
                <div class="chess-square light" id="h1"><span class="notation">h1</span></div>
            </div>

            <div id="player-white-name" class="player-name-display"></div>
        </div>

        <div class="sidebar-right">
            <div class="pgn-preloaded-section">
                <button id="btn-load-preloaded" class="myButton" style="width: 100%; margin: 8px 0; padding: 10px;">
                    Carregar (Nezhmetdinov & Tal)
                </button>

                <div id="preloaded-status" style="margin: 8px 0; font-size: 0.85em; color: #ffaa00; min-height: 1.2em;">
                </div>

                <div id="preloaded-selects" style="display: none;">
                    <label for="select-nez-game" class="config-label">Nezhmetdinov:</label>
                    <select id="select-nez-game" class="config-select">
                        <option value="">Selecione uma partida...</option>
                    </select>

                    <label for="select-thal-game" class="config-label">Tal:</label>
                    <select id="select-thal-game" class="config-select">
                        <option value="">Selecione uma partida...</option>
                    </select>
                </div>
            </div>

            <div class="config-panel" style="margin-top: 20px; padding-top: 15px; border-top: 1px dotted #B58863;">
                <div style="margin: 10px 0;">
                    <label for="voice-select" class="config-label">🎤 Voz do lance:</label>
                    <select id="voice-select" class="config-select">
                        <option value="">Carregando vozes...</option>
                    </select>
                </div>



            </div>

            <div class="stockfish-panel">
                <button id="btn-analyze" disabled>Analisar Posição</button>
                <button id="btn-visual-analysis" disabled>🌳 Análise Visual (Multi-PV)</button>
                <button id="btn-play-vs-stockfish" class="myButton"
                    style="width: 100%; margin: 10px 0; background: linear-gradient(to bottom, #FF5722 5%, #F4511E 100%); color: white;">
                    🎮 Jogar contra Stockfish
                </button>
                <div id="stockfish-eval"></div>
                <div id="stockfish-bestmove"></div>
                <div id="stockfish-depth"></div>
            </div>

            <div id="game-stats-panel" style="display: none; margin-top: 15px;">
                <button id="toggle-stats"
                    style="width: 100%; padding: 10px; background: linear-gradient(to bottom, #2a5934 5%, #1e4026 100%); color: white; border: 1px solid #3d7a4a; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 0.95em; display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <span>📊 Estatísticas da Partida</span>
                    <span id="stats-arrow">▼</span>
                </button>

                <div id="stats-content" style="display: none;">
                    <div
                        style="background: #f7f7f7; border: 1px solid #B58863; border-radius: 8px; padding: 12px; margin-bottom: 8px;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                            <div style="flex: 1; text-align: left;">
                                <div id="white-player-name"
                                    style="font-size: 0.95em; font-weight: bold; color: #333; margin-bottom: 3px;">
                                    Brancas</div>
                                <div style="color: #666; font-size: 0.75em;">White</div>
                            </div>
                            <div
                                style="background: #2a5934; color: white; padding: 6px 12px; border-radius: 15px; font-weight: bold; font-size: 0.85em;">
                                VS</div>
                            <div style="flex: 1; text-align: right;">
                                <div id="black-player-name"
                                    style="font-size: 0.95em; font-weight: bold; color: #333; margin-bottom: 3px;">
                                    Pretas</div>
                                <div style="color: #666; font-size: 0.75em;">Black</div>
                            </div>
                        </div>

                        <div style="display: flex; justify-content: space-around; align-items: center;">
                            <div style="text-align: center;">
                                <div
                                    style="background: white; border: 2px solid #4CAF50; border-radius: 12px; padding: 10px 15px; display: inline-block; min-width: 60px;">
                                    <div id="white-accuracy"
                                        style="font-size: 1.5em; font-weight: bold; color: #2a5934;">0</div>
                                </div>
                                <div
                                    style="margin-top: 6px; display: flex; justify-content: center; gap: 10px; font-size: 0.85em;">
                                    <span id="white-good-moves" style="color: #4CAF50; font-weight: bold;">0</span>
                                    <span id="white-bad-moves" style="color: #E53935; font-weight: bold;">0</span>
                                </div>
                            </div>

                            <div style="text-align: center;">
                                <div style="font-size: 0.8em; color: #666;">⏱️</div>
                                <div style="font-weight: bold; color: #333; margin-top: 3px; font-size: 0.8em;">Accuracy
                                </div>
                            </div>

                            <div style="text-align: center;">
                                <div
                                    style="background: #2a2926; border: 2px solid #666; border-radius: 12px; padding: 10px 15px; display: inline-block; min-width: 60px;">
                                    <div id="black-accuracy" style="font-size: 1.5em; font-weight: bold; color: white;">
                                        0</div>
                                </div>
                                <div
                                    style="margin-top: 6px; display: flex; justify-content: center; gap: 10px; font-size: 0.85em;">
                                    <span id="black-good-moves" style="color: #4CAF50; font-weight: bold;">0</span>
                                    <span id="black-bad-moves" style="color: #E53935; font-weight: bold;">0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div
                        style="background: #f7f7f7; border: 1px solid #B58863; border-radius: 8px; padding: 12px; font-size: 0.9em;">
                        <div
                            style="background: #2a5934; color: white; padding: 8px; border-radius: 6px 6px 0 0; margin: -12px -12px 12px -12px; display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span
                                    style="background: #4CAF50; padding: 4px 10px; border-radius: 12px; font-size: 0.85em; font-weight: bold;">Good</span>
                                <span
                                    style="width: 8px; height: 8px; background: #4CAF50; border-radius: 50%; display: inline-block;"></span>
                            </div>
                            <div style="display: flex; gap: 12px; font-size: 0.85em;">
                                <div
                                    style="background: white; color: #2a5934; padding: 4px 10px; border-radius: 12px; font-weight: bold;">
                                    W</div>
                                <div
                                    style="background: #2a2926; color: white; padding: 4px 10px; border-radius: 12px; font-weight: bold;">
                                    B</div>
                            </div>
                        </div>

                        <div id="move-stats-list">
                            <div class="stat-row"
                                style="display: flex; justify-content: space-between; align-items: center; padding: 6px 3px; border-bottom: 1px solid #e0e0e0;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span
                                        style="width: 26px; height: 26px; background: #1BADA6; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9em;">!!</span>
                                    <span style="color: #333; font-weight: 500; font-size: 0.9em;">Brilliant</span>
                                </div>
                                <div
                                    style="display: flex; gap: 25px; font-weight: bold; color: #333; font-size: 0.9em;">
                                    <span id="white-brilliant">0</span>
                                    <span id="black-brilliant">0</span>
                                </div>
                            </div>

                            <div class="stat-row"
                                style="display: flex; justify-content: space-between; align-items: center; padding: 6px 3px; border-bottom: 1px solid #e0e0e0;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span
                                        style="width: 26px; height: 26px; background: #5C9ECC; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9em;">!</span>
                                    <span style="color: #333; font-weight: 500; font-size: 0.9em;">Great</span>
                                </div>
                                <div
                                    style="display: flex; gap: 25px; font-weight: bold; color: #333; font-size: 0.9em;">
                                    <span id="white-great">0</span>
                                    <span id="black-great">0</span>
                                </div>
                            </div>

                            <div class="stat-row"
                                style="display: flex; justify-content: space-between; align-items: center; padding: 6px 3px; border-bottom: 1px solid #e0e0e0;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span
                                        style="width: 26px; height: 26px; background: #96BC4B; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9em;">✓</span>
                                    <span style="color: #333; font-weight: 500; font-size: 0.9em;">Best</span>
                                </div>
                                <div
                                    style="display: flex; gap: 25px; font-weight: bold; color: #333; font-size: 0.9em;">
                                    <span id="white-best">0</span>
                                    <span id="black-best">0</span>
                                </div>
                            </div>

                            <div class="stat-row"
                                style="display: flex; justify-content: space-between; align-items: center; padding: 6px 3px; border-bottom: 1px solid #e0e0e0;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span
                                        style="width: 26px; height: 26px; background: #96BC4B; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9em;">⚡</span>
                                    <span style="color: #333; font-weight: 500; font-size: 0.9em;">Excellent</span>
                                </div>
                                <div
                                    style="display: flex; gap: 25px; font-weight: bold; color: #333; font-size: 0.9em;">
                                    <span id="white-excellent">0</span>
                                    <span id="black-excellent">0</span>
                                </div>
                            </div>

                            <div class="stat-row"
                                style="display: flex; justify-content: space-between; align-items: center; padding: 6px 3px; border-bottom: 1px solid #e0e0e0;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span
                                        style="width: 26px; height: 26px; background: #96AF8B; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9em;">▽</span>
                                    <span style="color: #333; font-weight: 500; font-size: 0.9em;">Good</span>
                                </div>
                                <div
                                    style="display: flex; gap: 25px; font-weight: bold; color: #333; font-size: 0.9em;">
                                    <span id="white-good">0</span>
                                    <span id="black-good">0</span>
                                </div>
                            </div>

                            <div class="stat-row"
                                style="display: flex; justify-content: space-between; align-items: center; padding: 6px 3px; border-bottom: 1px solid #e0e0e0;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span
                                        style="width: 26px; height: 26px; background: #F0C15C; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9em;">?!</span>
                                    <span style="color: #333; font-weight: 500; font-size: 0.9em;">Inaccuracy</span>
                                </div>
                                <div
                                    style="display: flex; gap: 25px; font-weight: bold; color: #333; font-size: 0.9em;">
                                    <span id="white-inaccuracy">0</span>
                                    <span id="black-inaccuracy">0</span>
                                </div>
                            </div>

                            <div class="stat-row"
                                style="display: flex; justify-content: space-between; align-items: center; padding: 6px 3px; border-bottom: 1px solid #e0e0e0;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span
                                        style="width: 26px; height: 26px; background: #E58F2A; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9em;">?</span>
                                    <span style="color: #333; font-weight: 500; font-size: 0.9em;">Mistake</span>
                                </div>
                                <div
                                    style="display: flex; gap: 25px; font-weight: bold; color: #333; font-size: 0.9em;">
                                    <span id="white-mistake">0</span>
                                    <span id="black-mistake">0</span>
                                </div>
                            </div>

                            <div class="stat-row"
                                style="display: flex; justify-content: space-between; align-items: center; padding: 6px 3px;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span
                                        style="width: 26px; height: 26px; background: #CA3431; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9em;">✕</span>
                                    <span style="color: #333; font-weight: 500; font-size: 0.9em;">Blunder</span>
                                </div>
                                <div
                                    style="display: flex; gap: 25px; font-weight: bold; color: #333; font-size: 0.9em;">
                                    <span id="white-blunder">0</span>
                                    <span id="black-blunder">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="setting-buttons">
        </div>
    </div>

    <footer>
        <div id="footer2">Criado por Jose R F Junior, web2ajax@gmail.com ♟, 2025</div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.2/chess.min.js"></script>
    <script src="game.js"></script>
    <script src="play-vs-stockfish.js"></script>
</body>

</html>